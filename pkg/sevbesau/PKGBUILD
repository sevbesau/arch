# Maintainer: Seppe Van Besauw <seppe@sevbesau.xyz>
pkgbase=sevbesau
pkgname=(sevbesau-base sevbesau-dotfiles sevbesau-desktop)
pkgver=0.1.3
pkgrel=1
pkgdesc="System configuration for sevbesau systems"
arch=(any)
url="https://github.com/sevbesau/arch-pkgs"
license=(MIT)
groups=(sevbesau)
depends=(git)

rootdir=$PWD

# Installs dotfiles into /etc/skel so every new user 
# will be set up with the dotfiles repo.
package_sevbesau-dotfiles() {
	install=sevbesau-dotfiles.install
	
	mkdir -p "$pkgdir/usr/share/sevbesau"
	git clone 'https://github.com/sevbesau/dotfiles.git' "$pkgdir/usr/share/sevbesau/dotfiles"
}

# Base config
package_sevbesau-base() {
	install=sevbesau-base.install
	
	depends=(
		# Needs dotfiles
		sevbesau-dotfiles

		# Base packages
		base linux linux-firmware man-db man-pages neovim

		# Base devel	
		base-devel unzip bash-completion s3cmd openssh devtools zip

		# Extra general packages
		wget dialog btop
		
		# Nicer (bigger) tty font
		terminus-font

		# Docker
		docker docker-compose
		
		# Node toolsarch/pkg/sevbesau/sevbesau-desktop.install
		yarn npm nodejs prettier
		
		# Graphical boot
		plymouth
		
		# Networking
		wpa_supplicant
	)

	cp -a "$rootdir/files-base/"* "$pkgdir"
	chmod -R 0750 "$pkgdir/etc/sudoers.d"
}

# Desktop environment
package_sevbesau-desktop() {
	install=sevbesau-desktop.install

	depends=(
		# Depends on the base config
		sevbesau-base
		
		# Desktop env
		hyprland 						# window manager
		hyprpaper 					# wallpapers
		rofi-wayland 				# system menu's
		dunst								# notifications
		adapta-gtk-theme		# gtk theme
		papirus-icon-theme	# icon theme
		xcursor-breeze 			# (AUR) cursor theme 
		nemo 								# file manager
		kitty 							# terminal
		firefox 						# web browser
		mpv									# video player
		gstreamer						# video streaming utility
		mpd 								# music player deamon
		mpc									# mpd control utility
		ttf-hack-nerd 			# monospace font
		ttf-joypixels 			# emoji font
		noto-fonts-emoji		# emoji font
		xdg-utils 					# xdg utilities
		nwg-look						# gtk theme picker
		discord 						# chat client
		code								# code editor
		transmission-gtk 		# torrent client
		toilet							# ascii text art generator
		1password 					# (AUR) password manager
		prismlauncher				# (AUR) minecraft launcher
		bluez								# bluetooth protocol stack
		bluez-utils 				# bluetoothctl
   	# audio framework
		pipewire pipewire-audio pipewire-pulse pipewire-alsa pavucontrol 		
		# audio effects
		easyeffects calf lsp-plugins-lv2 zam-plugins-lv2 mda.lv2						

		
		# slack-desktop  youtube-dl
	)

	cp -a "$rootdir/files-desktop/"* "$pkgdir"
}
